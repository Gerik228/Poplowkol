Основная причина, по которой скрипт «ведёт себя хорошо» из-под терминала, но «молчит» в cron, почти всегда одна и та же — у cron совсем другой (очень «бедный») окружение.
В вашем скрипте сразу несколько мест, которые в cron-окружении «падают»:

Что в скрипте	Почему в cron это часто ломается	Как починить

sql … и git … вызываются «как есть»	В переменной PATH, c которой cron стартует юзерские задания, обычно только /usr/bin:/bin. Ваши sql (SQLcl) и git чаще всего лежат в /usr/local/bin, /opt/sqlcl/bin, … и поэтому просто не находятся.	1) В начале скрипта явно задайте PATH <br>export PATH=/usr/local/bin:/usr/bin:/bin <br>или пишите полный путь: /opt/sqlcl/bin/sql / /usr/bin/git.
В команде git commit -m "Автоэкспорт APEX от $DATE" есть русские буквы	Cron стартует с локалью LANG=C, git пытается записать сообщение в ASCII, ругается на «non-UTF-8 characters».	Перед git-командами добавьте <br>export LANG=en_US.UTF-8
Папка $EXPORT_DIR создаётся «на лету» в параметре -dir, но реальной директории пока нет	SQLcl не пытается сам создавать каталоги, поэтому команда apex export … -dir $EXPORT_DIR внутри here-doc отваливается	Перед вызовом SQLcl вставьте mkdir -p "$EXPORT_DIR"
В $DATE используются двоеточия : (%H:%M:%S)	В Linux двоеточия допустимы, но git/SSH могут счесть путь «user@host:repo».	Безопаснее заменить : на - или _: <br>DATE=$(date '+%Y-%m-%d_%H-%M-%S')
Отсутствие ORACLE-переменных (если SQLcl ищет JAVA_HOME, NLS_LANG, …)	Cron их не наследует	Экспортируйте нужные перед запуском: <br>export JAVA_HOME=/opt/java …



---

Минимальный «рабочий» вариант

#!/bin/bash
set -e                          # падаем при первой ошибке
export PATH=/usr/local/bin:/usr/bin:/bin
export LANG=en_US.UTF-8
export NLS_LANG=AMERICAN_AMERICA.AL32UTF8   # если нужно SQLcl

DATE=$(date '+%Y-%m-%d_%H-%M-%S')
EXPORT_BASE="/home/akulich_d/APEX/bi-portal"
EXPORT_DIR="$EXPORT_BASE/export_${DATE}"

mkdir -p "$EXPORT_DIR"

# --- экспорт из APEX ---
/opt/sqlcl/bin/sql webrnd/****@//vld-srvapex01.pskb.ad:1521/apexdb <<EOF
apex export -applicationid 112 -split -dir $EXPORT_DIR
exit
EOF

# --- чистка старых экспортных папок ---
find "$EXPORT_BASE" -maxdepth 1 -type d -name 'export_*' -mtime +7 -exec rm -rf {} \;

# --- git ---
cd "$EXPORT_BASE"
git add .
git commit -m "Автоэкспорт APEX от ${DATE}"
git push origin master


---

Как отлаживать cron-скрипты

1. Логируйте вывод:

0 3 * * * /home/akulich_d/scripts/apex_export.sh >>/var/log/apex_export.log 2>&1


2. Сравните окружения:
в самом начале скрипта env > /tmp/env_from_cron.txt — посмотрите, чего не хватает.


3. set -x или bash -x script.sh — увидите, на какой команде падает.



С этими правками скрипт в cron будет выполняться так же стабильно, как и вручную. Если после изменений проблемы останутся — пришлите логи (/var/log/syslog или тот самый apex_export.log), посмотрим, где ещё тонко.

