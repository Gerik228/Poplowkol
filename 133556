Вот подробная инструкция для Oracle APEX 23.1, как реализовать открытие ссылок из DataLens в той же вкладке, используя промежуточную страницу в APEX. Этот способ обходит ограничение target="_blank".


---

Цель:

Пользователь кликает на ссылку в таблице DataLens, и она открывается в том же окне APEX-приложения (внутри основного окна, не в новой вкладке).


---

Структура решения:

1. Создать промежуточную APEX-страницу page_router.


2. Передавать в нее параметры из DataLens (например, id, type, tab и т.д.).


3. На странице APEX сработает редирект на нужную страницу, на основании логики или параметров.


4. В DataLens настраивается URL()-поле, которое ведет на page_router.




---

Шаг 1: Создание промежуточной страницы в APEX

1. В APEX открой ваше приложение.


2. Нажмите "Создать страницу" → выберите "Пустая страница".


3. Назовите её Page Router (например, ID = 99).


4. Убедитесь, что она доступна публично (если дашборд DataLens вне логина), либо включите авторизацию по сессии.




---

Шаг 2: Добавление параметров страницы

1. Перейди в свойства страницы 99.


2. В разделе "Процессинг" > "Параметры страницы" добавь параметры, например:

P99_ID (тип: Text)

P99_TAB (если есть)

и т.д.





---

Шаг 3: Создание динамического действия для редиректа

1. На странице 99, перейди в "Обработчики" > "Динамические действия".


2. Создай новый:

Событие: Page Load

Действие: Execute JavaScript Code



3. Вставь код (пример):



var id = apex.item("P99_ID").getValue();
var tab = apex.item("P99_TAB").getValue();

// Сформируй URL нужной страницы APEX, например страница 10
var targetUrl = "f?p=100:10:::NO::P10_ID:" + id;

// Переход на страницу
window.location.href = targetUrl;

Ты можешь расширить это условной логикой:

if (tab === 'analytics') {
  window.location.href = "f?p=100:20:::NO::P20_ID:" + id;
} else {
  window.location.href = "f?p=100:10:::NO::P10_ID:" + id;
}


---

Шаг 4: Настройка DataLens

1. В поле URL в карточке/таблице добавь формулу:



'URL("https://your-apex-domain.com/ords/f?p=100:99:::NO::P99_ID:" + str([id]) + '")'

Если ты передаешь несколько параметров:

'URL("https://your-apex-domain.com/ords/f?p=100:99:::NO::P99_ID:" + str([id]) + '&P99_TAB=' + [tab])'


---

Результат:

1. Пользователь нажимает на ссылку в DataLens.


2. Попадает на страницу 99 APEX-приложения.


3. JavaScript на этой странице автоматически редиректит его на нужную целевую страницу (в зависимости от параметров).


4. Всё происходит в текущей вкладке.




---

Если хочешь, я могу помочь с примером URL, подставляя конкретные поля из твоего датасета.

