Конечно! Ниже — полная и актуальная инструкция, полностью адаптированная к твоей HTML-разметке из снимка и под Oracle APEX 23.1.0.


---

Цель

Показывать HTML-контент из поля des_test (тип CLOB) таблицы bi_portal_faq по клику на кнопку в FAQ-шаблоне. Контент должен подгружаться динамически через AJAX и вставляться в соответствующий блок <dd class="x-faq-dd">.


---

Шаг 1. Добавь скрытый Page Item

Имя: PXX_FAQ_ID (где XX — номер страницы)

Тип: Hidden

Value Protected: No

Используется для передачи ID в AJAX callback



---

Шаг 2. Создай AJAX Callback

Где: Page Processing → AJAX Callback

Имя: GET_FAQ_HTML

Тип: PL/SQL Function Returning CLOB

Код:

declare
    l_clob clob;
begin
    select des_test
      into l_clob
      from bi_portal_faq
     where id = :PXX_FAQ_ID;

    return l_clob;
end;


---

Шаг 3. Измени HTML-шаблон Template Component

Твоя текущая разметка + изменения:

<dt class="x-faq-dt">
  <button type="button" class="x-faq-btn" aria-expanded="false" data-faq-id="#ID#">
    <span class="x-faq-title">#QUESTION#</span>
    <span class="x-faq-icon-parent">
      <span class="fa fa-plus" aria-hidden="true"></span>
      <span class="fa fa-minus" aria-hidden="true" style="display: none;"></span>
    </span>
  </button>
</dt>
<dd class="x-faq-dd" id="faq-answer-#ID#" style="display: none;">
  <div class="faq-loading" style="display: none;">Загрузка...</div>
</dd>

Что изменено:

#ANSWER!RAW# заменён на div.faq-loading, куда будет вставляться HTML-контент

Уникальный id="faq-answer-#ID#" для каждой записи



---

Шаг 4. JavaScript для загрузки CLOB-контента

Где: Page → Execute when Page Loads

document.querySelectorAll(".x-faq-btn").forEach(function(btn) {
  btn.addEventListener("click", function () {
    const faqId = btn.getAttribute("data-faq-id");
    const answerBlock = document.getElementById("faq-answer-" + faqId);

    const isOpen = btn.getAttribute("aria-expanded") === "true";
    btn.setAttribute("aria-expanded", !isOpen);
    btn.querySelector(".fa-plus").style.display = isOpen ? "" : "none";
    btn.querySelector(".fa-minus").style.display = isOpen ? "none" : "";

    answerBlock.style.display = isOpen ? "none" : "block";

    // Если уже загружено — не загружать снова
    if (!answerBlock.dataset.loaded && !isOpen) {
      apex.item("PXX_FAQ_ID").setValue(faqId);

      const loader = answerBlock.querySelector(".faq-loading");
      loader.style.display = "block";

      apex.server.process("GET_FAQ_HTML", {
        pageItems: "#PXX_FAQ_ID#"
      }, {
        success: function(pData) {
          loader.style.display = "none";
          answerBlock.innerHTML = pData;
          answerBlock.dataset.loaded = "true";
        },
        error: function(jqXHR, textStatus, errorThrown) {
          loader.innerHTML = "Ошибка загрузки";
        }
      });
    }
  });
});


---

Шаг 5. Проверка

Убедись, что у Template Component отключено Escape Special Characters (чтобы HTML отображался как код, а не как текст).

Проверь, что колонка ID выводится в SQL-источнике данных компонента.

Если используешь Report или Template Component, убедись, что #ID# корректно подставляется.



---

Результат

При клике на вопрос:

HTML из CLOB (des_test) подгружается по AJAX.

Вставляется как innerHTML в блок <dd>.

Отображается корректно как HTML (с форматированием, стилями и т.д.).



---

Если хочешь — могу помочь экспортировать пример страницы с этим решением.
Продолжим?

