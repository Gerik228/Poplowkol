‚ùå –û—à–∏–±–∫–∞ ORA-25001: Cannot create this trigger type on this type of view

–¢–∞–±–ª–∏—Ü–∞ APEX_APPLICATION_PAGES ‚Äî —ç—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (VIEW), –∞ –≤ Oracle –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö.


---

‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–µ–º DDL-—Ç—Ä–∏–≥–≥–µ—Ä

–ü–æ—Å–∫–æ–ª—å–∫—É APEX —Ö—Ä–∞–Ω–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å DDL-—Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è CREATE PAGE –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

CREATE OR REPLACE TRIGGER trg_apex_page_created
AFTER CREATE ON SCHEMA
DECLARE
    v_application_id NUMBER;
BEGIN
    -- –ü–æ–ª—É—á–∞–µ–º ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    SELECT MAX(application_id)
    INTO v_application_id
    FROM apex_application_pages;
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∑–∞–º–µ–Ω–∏—Ç–µ 112 –Ω–∞ –≤–∞—à APP_ID)
    IF v_application_id = 112 THEN
        DBMS_SCHEDULER.RUN_JOB('RUN_UPDATE_PAGES_JOB'); -- –ó–∞–ø—É—Å–∫ –¥–∂–æ–±–∞
    END IF;
END;
/


---

üîπ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. AFTER CREATE ON SCHEMA ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ DDL-—Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, CREATE PAGE).


2. SELECT MAX(application_id) FROM apex_application_pages ‚Äî –ø–æ–ª—É—á–∞–µ—Ç ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.


3. IF v_application_id = 112 THEN ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.


4. DBMS_SCHEDULER.RUN_JOB('RUN_UPDATE_PAGES_JOB') ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç DB Job.




---

üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ APEX –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

SELECT log_date, job_name, status 
FROM dba_scheduler_job_run_details 
WHERE job_name = 'RUN_UPDATE_PAGES_JOB'
ORDER BY log_date DESC;


---

üî• –ò—Ç–æ–≥

‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º DDL-—Ç—Ä–∏–≥–≥–µ—Ä –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ.
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ APEX-—Å—Ö–µ–º–µ.

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∂–æ–± –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üöÄ

